<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description"
          content="Caleb Hattingh's blog about mostly computing and web design, but also about
                   math and chemical engineering, and occasionally about art and music.">
    <meta name="author" content="Caleb Hattingh">
    <link rel="canonical" href="">
    <meta name="keywords" content="Python,javascript,Sass,CSS,animation,math,IPython,Cython,Guitar,Piano,Drawing">
    <meta name="viewport" content="width=device-width">
    <!-- <meta property="og:title" content=""> -->
    <!-- <meta property="og:image" content=""> -->
    <!-- <meta property="og:description" content=""> -->
    <meta name="google-site-verification" content="1MRTyLZEkK2A3gbgyuVdRTIQE9TtnISGkgTxhqn4uHs" />
    <title>Pythonomicon</title>
    <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config(
            {tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                displayMath: [['\\[','\\]'], ['$$','$$']]
                }
            }
        );
    </script>
    <script type="text/javascript"
      src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="stylesheets/syntax.css">
    <link rel="stylesheet" href="stylesheets/base.css">
</head>
<body>
    <div id="banner">
        <p class='navinfo'>You can navigate by keyboard: use <kbd>tab</kbd> to move focus and
        <kbd>enter</kbd> to hit buttons and links.</p>
    </div>
    <aside id="mainlogo">
        <p class="ttext">pythonomicon</p>
        <p class="minstrel">Caleb Hattingh</p>
    </aside>
    <aside id="links">
        <ul>
            <!-- <li>Archive</li> -->
            <li><a href="https://twitter.com/caleb_hattingh" target="_blank">
                <i class="fa fa-twitter"></i> Twitter</a></li>
            <li><a href="https://github.com/cjrh" target="_blank">
                <i class="fa fa-github"></i> Github</a></li>
            <li><a href="https://bitbucket.org/cjrh" target="_blank">
                <i class="fa fa-bitbucket"></i> Bitbucket</a></li>
            <li><a href="http://au.linkedin.com/in/calebhattingh" target="_blank">
                <i class="fa fa-linkedin"></i> LinkedIn</a></li>
            <li><a href="http://codepen.io/cjrh/" target="_blank">
                <i class="fa fa-codepen"></i> Codepen</a></li>
            <!-- <li>Resume</li> -->
            <li class="break"></li>
        </ul>
    </aside>
    <div id="main">
        <div id="content-container">
            <button id="prev-button" class="left button">
                <i class="fa fa-arrow-circle-left"></i>
                Previous
            </button>
            <button id="next-button" class="right button">
                Next
                <i class="fa fa-arrow-circle-right"></i>
            </button>
            <div id="metadata">
                <p>This post: <strong><span id="this_post"></span></strong><p>
                <p>Original Jupyter Notebook:<a id="this_notebook" href=""></a></p>
                <p>Created: <span id="creation_date"></span><p>
                <p>Modified: <span id="modified_date"></span><p>
                <p>Previous: <a id="previous_post" href=""></a><p>
                <p>Next: <a id="next_post" href=""></a><p>
            </div>
            <div id="content"></div>

            <!-- <div id="disqus_thread"></div> -->
            <!-- <script type="text/javascript"> -->
            <!--     /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */ -->
            <!--     var disqus_shortname = 'cjrh'; // required: replace example with your forum shortname -->
            <!--     /* * * DON'T EDIT BELOW THIS LINE * * */ -->
            <!--     (function() { -->
            <!--          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; -->
            <!--          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; -->
            <!--          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); -->
            <!--      })(); -->
            <!-- </script> -->
            <!-- <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> -->
        </div>
        <div id=comment></div>
    </div>
    <footer><p></p></footer>
    <!-- Load scripts last. -->
    <script src="/js/jquery-3.0.0.min.js"></script>
    <script src="/js/velocity.min.js"></script>
    <script src="/js/velocity.ui.min.js"></script>
    <script>
        var content = document.getElementById('content');
        window.onload = loadContent;

        function loadContent() {
            var post = getFromUrl("post");
            if (post === "") {
                loadPage("posts/latest.json", function(data) {
                    var latest = JSON.parse(data);
                    showPost(latest.post);
                })
            } else {
                showPost(post);
            }
        }

        function loadPage(href, callback)
        {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var data = xmlhttp.responseText;
                    callback(data);
                }
            };
            xmlhttp.open("GET", href, true);
            xmlhttp.send();
        }

        function make_postlink(name) {
            return window.location.protocol + '//' + window.location.host + '/?post=' + name;
        }

        function change_metadata(name, description, ref) {
            $('title').text(name);

            // $('meta[name=description]').remove();
            // $('head').append('<meta name="description" content="' + description + '">');
            $('meta[name=description]').attr("content", description);

            var url = make_postlink(name);
            $('link[rel="canonical"]').attr('href', url);

            // $('meta[property="og:title"]').remove();
            // $('meta[property="og:description"]').remove();
            // $('meta[property="og:url"]').remove();
            // $("head").append('<meta property="og:title" content="' + name + '">');
            // $("head").append('<meta property="og:description" content="' + name + '">');
            // $("head").append('<meta property="og:url" content="' + url + '">');

            $('meta[property="og:title"]').attr("content", name);
            $('meta[property="og:description"]').attr("content", name);
            $('meta[property="og:url"]').attr("content", url);
        }

        var load_dirn = 'Left';
        function showPost(name) {
            var element = document.getElementById("content");
            var postref = "posts/" + name + ".html";
            document.title = name;
            element.innerHTML="";
            element.hidden = true; // For the animation, which fixes it.
            loadPage(postref, function(data) {
                element.innerHTML = data;
                var first_para = $('#content p:eq(0)').text();
                change_metadata(name, first_para, postref);
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, element]);
                loadPage("posts/" + name + ".json", function(data) {
                    var metadata = JSON.parse(data);
                    $('#this_post').text(name);

                    $('#this_notebook').attr("href", "/notebooks/" + name + ".ipynb");
                    $('#this_notebook').text(name + ".ipynb");

                    $('#creation_date').text(metadata.creation_date);
                    $('#modified_date').text(metadata.modified_date);
                    if (!metadata.previous_post) {
                        $('#previous_post').attr('href', "");
                        $('#previous_post').text("None (this is the first post)");
                    } else {
                        $('#previous_post').attr('href', make_postlink(metadata.previous_post));
                        $('#previous_post').text(metadata.previous_post);
                    }

                    if (!metadata.next_post) {
                        $('#next_post').attr('href', "");
                        $('#next_post').text("None (this is the latest post)");
                    } else {
                        $('#next_post').attr('href', make_postlink(metadata.next_post));
                        $('#next_post').text(metadata.next_post);
                    }
                    // Wire up the next and prev buttons
                    var prevevent = null;
                    if (metadata.previous_post !== null) {
                        prevevent = function() {
                            load_dirn = 'Left';
                            unloadingAnimation('Right', function () {
                                showPost(metadata.previous_post);
                            });
                        }
                    }
                    document.getElementById("prev-button").onclick = prevevent;

                    var nextevent = null;
                    if (metadata.next_post !== null) {
                        nextevent = function() {
                            load_dirn = 'Right';
                            unloadingAnimation('Left', function () {
                                showPost(metadata.next_post);
                            });
                        }
                    }

                    document.getElementById("next-button").onclick = nextevent;

                    window.history.pushState("", "", '?post='+name);
                    loadingAnimation();
                    element.parentElement.style.webkitTransform = 'scale(1)';
                });
            })
        }

        function getFromUrl(val) {
            var result = "",
                tmp = [];
            location.search
            //.replace ( "?", "" )
            // this is better, there might be a question mark inside
            .substr(1)
                .split("&")
                .forEach(function (item) {
                    tmp = item.split("=");
                    if (tmp[0] === val) result = decodeURIComponent(tmp[1]);
                });
            return result;
        };

        function filter_prompt(elems) {
            // I have to remove div.prompt manually. Velocity will
            // make it appear if it happens to be in the list, regardless
            // of what I specified in the stylesheet. So we first remove
            // these from the list before animating.
            var out = [];
            for (var i=0;i<elems.length;i+=1) {
                if (!elems[i].classList.contains("prompt")) {
                    out.push(elems[i]);
                }
            };
            return out;
        };

        function animation(name, stagger, complete) {
            var element = document.getElementById("content");
            element.hidden = false;
            var elems = filter_prompt(
            content.querySelectorAll('.text_cell_render>*, .input_area>*, .output>*'));
            window.elems = elems;
            $.Velocity(elems, name, {
                duration: 300,
                stagger: stagger,
                easing: "spring",
                drag: true,
                complete: complete
            });
        }

        function loadingAnimation() {
            animation('transition.slide' + load_dirn + 'BigIn', 80);
        }

        function unloadingAnimation(dir, complete) {
            animation('transition.slide' + dir + 'BigOut', 20, complete);
        }
    </script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
           m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
             })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-58647468-1', 'auto');
        ga('send', 'pageview');
    </script>
</body>
</html>
